# 32f1_temp

## 项目概述
一款基于 STM32F103RCT6 微控制器开发的温度监测与控制系统。该系统借助 DS18B20 数字温度传感器采集电阻的实时温度数据，运用 PID 控制算法对采集到的数据进行处理，并向 MOS 管输出 PWM（脉冲宽度调制）信号，以此精准控制电阻的发热功率，使电阻温度稳定在用户设定的目标温度附近。同时，系统通过 USRT 串口通信将当前温度、设定温度以及 PWM 占空比等关键数据传输至上位机，上位机利用[J.com](https://j.com/)软件对数据进行解析并绘制动态曲线，方便用户直观地监测系统运行状态。 温度控制范围：30–60℃，稳态误差≤±0.2℃，最大超调量≤4℃，调节时间≤300s 。

## 主要硬件组件

1. **0.96寸OLED显示屏**：采用该显示屏实时显示系统的关键信息，包括系统标题、当前电阻温度、用户设定的目标温度以及 PWM 占空比等，为用户提供直观的操作反馈。
2. **DS18B20数字温度采集器**：作为系统的温度感知核心，DS18B20 以数字量的形式将采集到的电阻温度数据准确输出给 STM32 微控制器，具备高精度、抗干扰能力强等优点。
3. **MOS管**：根据 STM32 输出的 PWM 信号，灵活控制加热电阻的导通，从而精确调节电阻的发热功率，确保电阻温度稳定在设定值。
4. **独立按键**：四个独立按键作为用户与系统交互的主要接口，方便用户对系统进行各种操作，如设置目标温度等。

## 详细实现方案

- **OLED 显示模块**：OLED 显示屏通过搭载到 PC12/11 模拟 SCL/SDA 的 IIC 总线上，实现数据的实时显示。这种模拟 IIC 通信方式不仅简化了硬件设计，还提高了系统的灵活性。
- **按键输入模块**：四个独立按键采用上拉输入方式，分别连接到 STM32 的 PA7、PA6、PA5、PA3 引脚。系统开机后自动进入主页，实时显示各项关键数据。用户按下 key1 后，系统进入更改设定温度模式，此时按下 key2 可增加设定温度，按下 key3 可减小设定温度，按下 key4 或key1则返回主页，操作简单便捷。
- **温度采集模块**：DS18B20 以单总线方式连接到 STM32 的 PB9 引脚，并以 TIM3 定时器所控制的 t 变量作为标志位，实现每秒一次的温度数据采集。这种定时采集机制确保了数据的实时性和准确性。
- **PID 控制与 PWM 输出**：DS18B20 采集到温度数据后，STM32 立即调用 PID 算法进行运算，并根据PID运算结果输出相应的 PWM 信号。
- **温度稳定控制**：MOS 管接收到 PWM 信号后，根据信号的占空比调整加热电阻的功率，通过不断的反馈调节，使电阻温度稳定在设定的目标温度附近。

## 硬件驱动模块

本项目所用到的硬件驱动模块包括 OLED、IIC、KEY、LED、DS18B20、PID、TIMER、USART，涵盖了从数据显示、通信到控制算法等多个方面，充分展示了对硬件驱动开发的全面掌握。

## 所体现的知识总结

### 硬件知识

- **微控制器应用**：熟练掌握 STM32F103 微控制器的引脚配置、寄存器操作以及外设使用，能够根据系统需求合理分配资源。
- **传感器应用**：了解 DS18B20 数字温度传感器的工作原理和单总线通信协议，能够实现传感器的数据采集和处理。
- **显示技术**：掌握 0.96 寸 OLED 显示屏的驱动原理和 IIC 通信协议，能够实现数据的实时显示。
- **功率控制**：理解 MOS 管的工作原理和 PWM 控制技术，能够通过 PWM 信号精确控制加热电阻的功率。
- **按键输入**：熟悉独立按键的硬件连接和上拉输入方式，能够实现按键的检测和事件处理。

### 软件知识

- **PID 控制算法**：掌握 PID 控制算法的原理和实现方法，能够根据系统的特性和需求进行参数调整，实现温度的精确控制。
- **定时器应用**：了解定时器的工作原理和使用方法，能够利用定时器实现定时任务，如温度数据的定时采集。
- **串口通信**：掌握 USART 串口通信协议，能够实现微控制器与上位机之间的数据传输和通信。
- **硬件驱动开发**：具备开发各种硬件驱动模块的能力，如 OLED、IIC、KEY、LED、DS18B20、PID、TIMER、USART 等，能够实现硬件与软件的有效结合。

### 系统设计与调试能力

- **系统架构设计**：能够根据项目需求设计合理的系统架构，包括硬件选型、模块划分和通信协议设计等。
- **调试与优化**：具备系统调试和优化的能力，能够通过示波器、逻辑分析仪等工具排查硬件故障和软件问题，对系统进行性能优化和稳定性提升。
